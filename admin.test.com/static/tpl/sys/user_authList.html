<{include "../common/header.html"}>

<article class="page-container">
	<form action="?m=sys&c=User&a=userAuth" method="post" class="form form-horizontal" id="ajaxForm">
		<input type="hidden" name="id" value="<{$id}>">
		<dl class="permission-list">
			<{$authMenu}>
		</dl>
		<div class="row cl">
			<div class="col-xs-8 col-sm-9 col-xs-offset-4 col-sm-offset-3">
				<button class="btn btn-primary radius" type="submit">提交</button>
				<button class="btn btn-primary radius" type="button" id="cancel_open">取消</button>
			</div>
		</div>
	</form>
</article>
<script type="text/javascript">
	$(function(){
		$(".permission-list dt input:checkbox").click(function(){
			$(this).closest("dl").find("dd input:checkbox").prop("checked",$(this).prop("checked"));
		});
		$(".permission-list2 dt input:checkbox").click(function(){
			if($(this).prop("checked")){
				$(this).parents(".permission-list").find('dt').first().find("input:checkbox").prop("checked",true);
			}
		});
		$(".permission-list2 dd input:checkbox").click(function(){
			var l =$(this).parent().parent().find("input:checked").length;
			var l2=$(this).parents(".permission-list").find(".permission-list2 dd").find("input:checked").length;
			if($(this).prop("checked")){
				$(this).closest("dl").find("dt input:checkbox").prop("checked",true);
				$(this).parents(".permission-list").find("dt").first().find("input:checkbox").prop("checked",true);
			}
			else{
				if(l==0){
					$(this).closest("dl").find("dt input:checkbox").prop("checked",false);
				}
				if(l2==0){
					$(this).parents(".permission-list").find("dt").first().find("input:checkbox").prop("checked",false);
				}
			}
		});
	});
</script>
<{include "../common/footer.html"}>